<div class="sds-table__container" [ngClass]="{'sds-table__container--borderless': borderless}">
  <table mat-table [dataSource]="dataSource" matSort [matSortDisabled]="!sortTable" [multiTemplateDataRows]=detailRow [ngClass]="{'sds-table--expansion': detailRow}" class="sds-table">

    <!-- Columns -->
    <ng-container matColumnDef="{{col.primaryKey}}" *ngFor="let col of columns" [sticky]=col.sticky cssClassFriendlyName="test">

      <!-- table header cells -->
      <th mat-header-cell *matHeaderCellDef>
        {{ col.header  || (col.primaryKey | titlecase)}}
      </th>

      <td mat-cell *matCellDef="let row">{{row[col.primaryKey] || row[col.alternativeKey]}}</td>
    </ng-container>

    <!-- Expandable detail row -->
    <ng-container matColumnDef="expandedDetail">
      <td mat-cell *matCellDef="let row" [attr.colspan]="columns.length" class="sds-table__detail">

        <!-- display detailRow templateRef with all row data -->
        <ng-container *ngTemplateOutlet="detailRow; context: row"></ng-container>
      </td>
    </ng-container>

    <!-- Header and row declarations for expansion table-->
    <ng-container *ngIf="detailRow">
      <tr mat-header-row *matHeaderRowDef="columnIds; sticky: stickyHeader" class="sds-table__head"></tr>
      <tr mat-row *matRowDef="let row; columns: columnIds" (click)="toggleRowExpansion(row)" class="sds-table__row"
        [ngClass]="{'sds-table__row--expanded': row === expandedRow}"></tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="sds-table__row--detail"></tr>
    </ng-container>

    <!-- Header and row declarations for non-expandable tables-->
    <ng-container *ngIf="!detailRow">
      <tr mat-header-row *matHeaderRowDef="columnIds; sticky: stickyHeader" class="sds-table__head"></tr>
      <tr mat-row *matRowDef="let row; columns: columnIds" class="sds-table__row"></tr>
    </ng-container>
  </table>
</div>
